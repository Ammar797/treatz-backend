# Give this service a name and a standard port (8080 is common for gateways)
spring.application.name=api-gateway
server.port=8080

# Tell it where to find the Town's Address Book (Eureka)
eureka.client.service-url.defaultZone=http://localhost:8761/eureka

# Standard Eureka client settings
eureka.instance.hostname=localhost
eureka.instance.prefer-ip-address=true

# This is our JWT secret. It MUST BE IDENTICAL to the one in your other services.
jwt.secret=411D442A472D4B6150645367566B5970337336763979244226452948404D6351

# --- THE ROUTING RULES ---
# This tells the Gateway how to direct traffic.

# Rule for Auth Service
spring.cloud.gateway.routes[0].id=auth-service
spring.cloud.gateway.routes[0].uri=lb://AUTH-SERVICE
spring.cloud.gateway.routes[0].predicates=Path=/auth/**

# Rule for Restaurant Service
spring.cloud.gateway.routes[1].id=restaurant-service
spring.cloud.gateway.routes[1].uri=lb://RESTAURANT-SERVICE
spring.cloud.gateway.routes[1].predicates=Path=/api/restaurants/**, /api/menu-items/**

# Rule for Order Service
spring.cloud.gateway.routes[2].id=order-service
spring.cloud.gateway.routes[2].uri=lb://ORDER-SERVICE
spring.cloud.gateway.routes[2].predicates=Path=/api/orders/**